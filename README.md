v3添加 goroutine和互斥锁设计

update: 之前直接把结构体直接传进去，性能开销大